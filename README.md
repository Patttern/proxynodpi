# Proxy with noDPI

## Описание

Прокси сервер, позволяющий обходить блокировки (задержки) при обращении к [Youtube](https://www.youtube.com/).
Основа взята из репозитория [nodpi](https://github.com/theo0x0/nodpi) от автора [theo0x0](https://github.com/theo0x0) и добавлены некоторые улучшайзинги.

## Требования для запуска программы

  * python v3.13
  * asyncio v3.4.3

Наверняка всё заработает и на более ранней версии Python и с другой версией библиотеки AsyncIO, но работочспособность проверялась именно на указанной связке.
Запускалось всё на linux-based ОС. На Windows не проверялось, но наверняка и там всё будет работать.

## Подготовка к работе

Проверяем, что требуемая версия Python установлена

```bash
python3.13 -V
```

Устанавливаем виртуальное окружение `venv` и активируем его

```bash
python3.13 -m venv venv
source venv/bin/activate
```

Проверяем что всё активировалось и работает верно

```bash
python -V
```

Обновляем pip

```bash
python -m pip install --upgrade pip
```

Устанавливаем требуемые пакеты

```bash
pip install --upgrade -r requirements.txt
```

## Запуск

Перед запуском удостоверьтесь, что виртуальное окружение `venv` активировано. При необходимости активируйте его командой

```bash
source venv/bin/activate
```

Запуск программы выполняется следующей командой

```bash
python main.py
```

Если требуется отправить выполнение программы на бэкграунд, можно запустить скрипт `run.sh`

```bash
chmod +x run.sh
./run.sh
```

При запуске программы создаётся директория `logs` (если ее не существует), куда прописываются логи работы программы.
Ротации логов нет, поэтому при работе следите за начиличем свободного места на диске.
При перезапуске программы, предыдущий лог архивируется и создаётся новый.


## Issues
1. Основная проблема заключается в том, что не всегда ролик запускается в первого раза: иногда подтупливает, иногда требуется перезагрузка страницы. После прочтения комментария от [D3NI4](https://habr.com/ru/articles/870110/#comment_27759104) к статье на Хабре [Обвиваем YouTube змеем, или как смотреть и скачивать видео с YouTube без VPN на чистом Python-е](https://habr.com/ru/articles/870110/), увеличил размер буфера до 4к, что сильно помогло работе. Стало всё шутрее открываться, но не идеально: "подтупливание" иногда всё таки присутствует иногда. Пока разбираюсь.
